<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="344" failures="0" errors="0" time="10.056">
  <testsuite name="SommelierCoordinator Integration" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="6.268" tests="3">
    <testcase classname="SommelierCoordinator Integration handleRecommendationRequest should successfully orchestrate knowledge graph recommendation flow with traceId" name="SommelierCoordinator Integration handleRecommendationRequest should successfully orchestrate knowledge graph recommendation flow with traceId" time="0.006">
    </testcase>
    <testcase classname="SommelierCoordinator Integration dead letter queue handling should route failed messages to DLQ with traceId when recommendation fails" name="SommelierCoordinator Integration dead letter queue handling should route failed messages to DLQ with traceId when recommendation fails" time="0">
    </testcase>
    <testcase classname="SommelierCoordinator Integration should log DLQ processing failures with traceId" name="SommelierCoordinator Integration should log DLQ processing failures with traceId" time="0">
    </testcase>
  </testsuite>
  <testsuite name="SharedContextMemory" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="6.327" tests="4">
    <testcase classname="SharedContextMemory should store and retrieve context" name="SharedContextMemory should store and retrieve context" time="0.006">
    </testcase>
    <testcase classname="SharedContextMemory should maintain separate contexts per owner" name="SharedContextMemory should maintain separate contexts per owner" time="0.001">
    </testcase>
    <testcase classname="SharedContextMemory should track version history" name="SharedContextMemory should track version history" time="0.001">
    </testcase>
    <testcase classname="SharedContextMemory should handle metadata" name="SharedContextMemory should handle metadata" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="AgentCommunicationBus" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="6.583" tests="10">
    <testcase classname="AgentCommunicationBus should register agents" name="AgentCommunicationBus should register agents" time="0.004">
    </testcase>
    <testcase classname="AgentCommunicationBus should publish and receive messages" name="AgentCommunicationBus should publish and receive messages" time="0.038">
    </testcase>
    <testcase classname="AgentCommunicationBus should allow unsubscribing" name="AgentCommunicationBus should allow unsubscribing" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should list all registered agents" name="AgentCommunicationBus should list all registered agents" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should handle topic-based subscriptions" name="AgentCommunicationBus should handle topic-based subscriptions" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should track subscriptions" name="AgentCommunicationBus should track subscriptions" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should set and get context" name="AgentCommunicationBus should set and get context" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should get context with metadata" name="AgentCommunicationBus should get context with metadata" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should share context between agents" name="AgentCommunicationBus should share context between agents" time="0.001">
    </testcase>
    <testcase classname="AgentCommunicationBus should broadcast context to all agents" name="AgentCommunicationBus should broadcast context to all agents" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="UserPreferenceController" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:25" time="0.801" tests="11">
    <testcase classname="UserPreferenceController getPreferences should return preferences for a given user ID" name="UserPreferenceController getPreferences should return preferences for a given user ID" time="0.005">
    </testcase>
    <testcase classname="UserPreferenceController getPreferences should return 400 if user ID is missing" name="UserPreferenceController getPreferences should return 400 if user ID is missing" time="0.012">
    </testcase>
    <testcase classname="UserPreferenceController getPreferences should handle errors when getting preferences" name="UserPreferenceController getPreferences should handle errors when getting preferences" time="0.013">
    </testcase>
    <testcase classname="UserPreferenceController should return 405 for unsupported HTTP method" name="UserPreferenceController should return 405 for unsupported HTTP method" time="0.001">
    </testcase>
    <testcase classname="UserPreferenceController addOrUpdatePreference should add or update a preference for a user" name="UserPreferenceController addOrUpdatePreference should add or update a preference for a user" time="0.002">
    </testcase>
    <testcase classname="UserPreferenceController addOrUpdatePreference should return 400 if user ID is missing" name="UserPreferenceController addOrUpdatePreference should return 400 if user ID is missing" time="0.002">
    </testcase>
    <testcase classname="UserPreferenceController addOrUpdatePreference should return 400 if preference data is invalid" name="UserPreferenceController addOrUpdatePreference should return 400 if preference data is invalid" time="0.001">
    </testcase>
    <testcase classname="UserPreferenceController addOrUpdatePreference should handle errors when adding or updating preference" name="UserPreferenceController addOrUpdatePreference should handle errors when adding or updating preference" time="0.033">
    </testcase>
    <testcase classname="UserPreferenceController deletePreference should delete a preference for a user" name="UserPreferenceController deletePreference should delete a preference for a user" time="0.006">
    </testcase>
    <testcase classname="UserPreferenceController deletePreference should return 400 if user ID or preference ID is missing" name="UserPreferenceController deletePreference should return 400 if user ID or preference ID is missing" time="0.002">
    </testcase>
    <testcase classname="UserPreferenceController deletePreference should handle errors when deleting preference" name="UserPreferenceController deletePreference should handle errors when deleting preference" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="BasicDeadLetterProcessor" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="7.267" tests="2">
    <testcase classname="BasicDeadLetterProcessor should call handlePermanentFailure if retry attempts are exhausted" name="BasicDeadLetterProcessor should call handlePermanentFailure if retry attempts are exhausted" time="0.02">
    </testcase>
    <testcase classname="BasicDeadLetterProcessor should add the failed message to the in-memory DLQ on permanent failure" name="BasicDeadLetterProcessor should add the failed message to the in-memory DLQ on permanent failure" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="Rate Limiter Middleware" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="7.348" tests="1">
    <testcase classname="Rate Limiter Middleware should allow requests up to the limit" name="Rate Limiter Middleware should allow requests up to the limit" time="0.294">
    </testcase>
  </testsuite>
  <testsuite name="LLMRecommendationAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="7.318" tests="12">
    <testcase classname="LLMRecommendationAgent should initialize correctly" name="LLMRecommendationAgent should initialize correctly" time="0.007">
    </testcase>
    <testcase classname="LLMRecommendationAgent handleMessage should return an error for unhandled message types" name="LLMRecommendationAgent handleMessage should return an error for unhandled message types" time="0.002">
    </testcase>
    <testcase classname="LLMRecommendationAgent handleRecommendationRequest should process a recommendation request successfully" name="LLMRecommendationAgent handleRecommendationRequest should process a recommendation request successfully" time="0.003">
    </testcase>
    <testcase classname="LLMRecommendationAgent handleRecommendationRequest should return an error if payload is missing" name="LLMRecommendationAgent handleRecommendationRequest should return an error if payload is missing" time="0.001">
    </testcase>
    <testcase classname="LLMRecommendationAgent handleRecommendationRequest should handle simulated LLM error" name="LLMRecommendationAgent handleRecommendationRequest should handle simulated LLM error" time="0.004">
    </testcase>
    <testcase classname="LLMRecommendationAgent handleRecommendationRequest should handle LLM service failure" name="LLMRecommendationAgent handleRecommendationRequest should handle LLM service failure" time="0.001">
    </testcase>
    <testcase classname="LLMRecommendationAgent handleRecommendationRequest should handle general exceptions during processing" name="LLMRecommendationAgent handleRecommendationRequest should handle general exceptions during processing" time="0.002">
    </testcase>
    <testcase classname="LLMRecommendationAgent buildPrompt should build a prompt with message only" name="LLMRecommendationAgent buildPrompt should build a prompt with message only" time="0.001">
    </testcase>
    <testcase classname="LLMRecommendationAgent buildPrompt should build a prompt with preferences" name="LLMRecommendationAgent buildPrompt should build a prompt with preferences" time="0.001">
    </testcase>
    <testcase classname="LLMRecommendationAgent buildPrompt should build a prompt with ingredients" name="LLMRecommendationAgent buildPrompt should build a prompt with ingredients" time="0">
    </testcase>
    <testcase classname="LLMRecommendationAgent buildPrompt should build a prompt with conversation history" name="LLMRecommendationAgent buildPrompt should build a prompt with conversation history" time="0">
    </testcase>
    <testcase classname="LLMRecommendationAgent buildPrompt should build a prompt with all fields" name="LLMRecommendationAgent buildPrompt should build a prompt with all fields" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="RecommendationAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="7.431" tests="14">
    <testcase classname="RecommendationAgent should initialize correctly" name="RecommendationAgent should initialize correctly" time="0.007">
    </testcase>
    <testcase classname="RecommendationAgent handleMessage should return an error for unhandled message types" name="RecommendationAgent handleMessage should return an error for unhandled message types" time="0.011">
    </testcase>
    <testcase classname="RecommendationAgent handleRecommendationRequest should return an error if payload input is missing" name="RecommendationAgent handleRecommendationRequest should return an error if payload input is missing" time="0.002">
    </testcase>
    <testcase classname="RecommendationAgent handleRecommendationRequest should process an ingredient-based recommendation request successfully" name="RecommendationAgent handleRecommendationRequest should process an ingredient-based recommendation request successfully" time="0.003">
    </testcase>
    <testcase classname="RecommendationAgent handleRecommendationRequest should process a preference-based recommendation request successfully" name="RecommendationAgent handleRecommendationRequest should process a preference-based recommendation request successfully" time="0.004">
    </testcase>
    <testcase classname="RecommendationAgent handleRecommendationRequest should handle no wines found and send appropriate response" name="RecommendationAgent handleRecommendationRequest should handle no wines found and send appropriate response" time="0.002">
    </testcase>
    <testcase classname="RecommendationAgent handleRecommendationRequest should handle general exceptions during processing" name="RecommendationAgent handleRecommendationRequest should handle general exceptions during processing" time="0.001">
    </testcase>
    <testcase classname="RecommendationAgent handlePreferenceUpdate should log debug message for successful preference update" name="RecommendationAgent handlePreferenceUpdate should log debug message for successful preference update" time="0.002">
    </testcase>
    <testcase classname="RecommendationAgent handlePreferenceUpdate should return error for failed preference update" name="RecommendationAgent handlePreferenceUpdate should return error for failed preference update" time="0.001">
    </testcase>
    <testcase classname="RecommendationAgent enhanceRecommendations should enhance recommendations with LLM response" name="RecommendationAgent enhanceRecommendations should enhance recommendations with LLM response" time="0.001">
    </testcase>
    <testcase classname="RecommendationAgent enhanceRecommendations should return original recommendations if LLM service fails" name="RecommendationAgent enhanceRecommendations should return original recommendations if LLM service fails" time="0.001">
    </testcase>
    <testcase classname="RecommendationAgent enhanceRecommendations should return original recommendations if LLM response format is invalid" name="RecommendationAgent enhanceRecommendations should return original recommendations if LLM response format is invalid" time="0.001">
    </testcase>
    <testcase classname="RecommendationAgent enhanceRecommendations should return original recommendations for general exceptions" name="RecommendationAgent enhanceRecommendations should return original recommendations for general exceptions" time="0.001">
    </testcase>
    <testcase classname="RecommendationAgent handleNoWinesFound should send a recommendation-response with no wines and an error message" name="RecommendationAgent handleNoWinesFound should send a recommendation-response with no wines and an error message" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Agent Message Handlers" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="7.467" tests="4">
    <testcase classname="Agent Message Handlers InputValidationAgent should validate input and return success for valid input" name="Agent Message Handlers InputValidationAgent should validate input and return success for valid input" time="0.066">
    </testcase>
    <testcase classname="Agent Message Handlers InputValidationAgent should handle invalid input" name="Agent Message Handlers InputValidationAgent should handle invalid input" time="0.005">
    </testcase>
    <testcase classname="Agent Message Handlers InputValidationAgent should handle LLM service failures" name="Agent Message Handlers InputValidationAgent should handle LLM service failures" time="0.003">
    </testcase>
    <testcase classname="Agent Message Handlers InputValidationAgent should forward user preferences when found" name="Agent Message Handlers InputValidationAgent should forward user preferences when found" time="0.011">
    </testcase>
  </testsuite>
  <testsuite name="InputValidationAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="7.517" tests="7">
    <testcase classname="InputValidationAgent validateInput should accept valid input with all required fields" name="InputValidationAgent validateInput should accept valid input with all required fields" time="0.011">
    </testcase>
    <testcase classname="InputValidationAgent validateInput should reject empty ingredients list" name="InputValidationAgent validateInput should reject empty ingredients list" time="0.002">
    </testcase>
    <testcase classname="InputValidationAgent validateInput should reject invalid budget values" name="InputValidationAgent validateInput should reject invalid budget values" time="0.003">
    </testcase>
    <testcase classname="InputValidationAgent validateInput should normalize ingredient names" name="InputValidationAgent validateInput should normalize ingredient names" time="0.002">
    </testcase>
    <testcase classname="InputValidationAgent validateInput should validate dietary restrictions via LLM" name="InputValidationAgent validateInput should validate dietary restrictions via LLM" time="0.001">
    </testcase>
    <testcase classname="InputValidationAgent handleMessage (fallback) should return an error for unhandled message types" name="InputValidationAgent handleMessage (fallback) should return an error for unhandled message types" time="0.013">
    </testcase>
    <testcase classname="InputValidationAgent error handling should handle AgentError with correlationId" name="InputValidationAgent error handling should handle AgentError with correlationId" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="FallbackAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="7.561" tests="9">
    <testcase classname="FallbackAgent should initialize correctly" name="FallbackAgent should initialize correctly" time="0.018">
    </testcase>
    <testcase classname="FallbackAgent handleMessage should return an error for unhandled message types" name="FallbackAgent handleMessage should return an error for unhandled message types" time="0.002">
    </testcase>
    <testcase classname="FallbackAgent handleFallbackRequest should return an error if payload is missing" name="FallbackAgent handleFallbackRequest should return an error if payload is missing" time="0.001">
    </testcase>
    <testcase classname="FallbackAgent handleFallbackRequest should process a fallback request successfully with LLM response" name="FallbackAgent handleFallbackRequest should process a fallback request successfully with LLM response" time="0.002">
    </testcase>
    <testcase classname="FallbackAgent handleFallbackRequest should process a fallback request with default response if LLM fails" name="FallbackAgent handleFallbackRequest should process a fallback request with default response if LLM fails" time="0.004">
    </testcase>
    <testcase classname="FallbackAgent handleFallbackRequest should handle general exceptions during processing" name="FallbackAgent handleFallbackRequest should handle general exceptions during processing" time="0.002">
    </testcase>
    <testcase classname="FallbackAgent generateFallbackResponse should generate a fallback response using LLM" name="FallbackAgent generateFallbackResponse should generate a fallback response using LLM" time="0.001">
    </testcase>
    <testcase classname="FallbackAgent generateFallbackResponse should return default fallback response if LLM service fails" name="FallbackAgent generateFallbackResponse should return default fallback response if LLM service fails" time="0.002">
    </testcase>
    <testcase classname="FallbackAgent generateFallbackResponse should return LLM_FALLBACK_ERROR for general exceptions during generation" name="FallbackAgent generateFallbackResponse should return LLM_FALLBACK_ERROR for general exceptions during generation" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="ExplanationAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="7.732" tests="5">
    <testcase classname="ExplanationAgent handleExplanationRequestInternal should generate and send an explanation for valid request" name="ExplanationAgent handleExplanationRequestInternal should generate and send an explanation for valid request" time="0.035">
    </testcase>
    <testcase classname="ExplanationAgent handleExplanationRequestInternal should return an error if payload is missing or invalid" name="ExplanationAgent handleExplanationRequestInternal should return an error if payload is missing or invalid" time="0.002">
    </testcase>
    <testcase classname="ExplanationAgent handleExplanationRequestInternal should handle LLM service failure gracefully" name="ExplanationAgent handleExplanationRequestInternal should handle LLM service failure gracefully" time="0.02">
    </testcase>
    <testcase classname="ExplanationAgent handleMessage (fallback) should return an error for unhandled message types" name="ExplanationAgent handleMessage (fallback) should return an error for unhandled message types" time="0.001">
    </testcase>
    <testcase classname="ExplanationAgent error handling should process errors and send error response" name="ExplanationAgent error handling should process errors and send error response" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="UserPreferenceAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="7.751" tests="12">
    <testcase classname="UserPreferenceAgent should initialize correctly" name="UserPreferenceAgent should initialize correctly" time="0.008">
    </testcase>
    <testcase classname="UserPreferenceAgent handleMessage should return an error for unhandled message types" name="UserPreferenceAgent handleMessage should return an error for unhandled message types" time="0.002">
    </testcase>
    <testcase classname="UserPreferenceAgent handlePreferenceRequest should return an error if payload is missing or invalid" name="UserPreferenceAgent handlePreferenceRequest should return an error if payload is missing or invalid" time="0.002">
    </testcase>
    <testcase classname="UserPreferenceAgent handlePreferenceRequest should process a preference request with fast extraction success" name="UserPreferenceAgent handlePreferenceRequest should process a preference request with fast extraction success" time="0.005">
    </testcase>
    <testcase classname="UserPreferenceAgent handlePreferenceRequest should queue async LLM extraction if fast extraction fails or returns no data" name="UserPreferenceAgent handlePreferenceRequest should queue async LLM extraction if fast extraction fails or returns no data" time="0.013">
    </testcase>
    <testcase classname="UserPreferenceAgent handlePreferenceRequest should handle general exceptions during processing" name="UserPreferenceAgent handlePreferenceRequest should handle general exceptions during processing" time="0.002">
    </testcase>
    <testcase classname="UserPreferenceAgent mergePreferences should merge preferences, with incoming overriding existing" name="UserPreferenceAgent mergePreferences should merge preferences, with incoming overriding existing" time="0.001">
    </testcase>
    <testcase classname="UserPreferenceAgent mergePreferences should handle empty existing preferences" name="UserPreferenceAgent mergePreferences should handle empty existing preferences" time="0">
    </testcase>
    <testcase classname="UserPreferenceAgent mergePreferences should handle empty incoming preferences" name="UserPreferenceAgent mergePreferences should handle empty incoming preferences" time="0">
    </testcase>
    <testcase classname="UserPreferenceAgent persistPreferences should call knowledgeGraphService.addOrUpdatePreference for each preference" name="UserPreferenceAgent persistPreferences should call knowledgeGraphService.addOrUpdatePreference for each preference" time="0.001">
    </testcase>
    <testcase classname="UserPreferenceAgent queueAsyncLLMExtraction should publish an llm-preference-extraction message to LLMPreferenceExtractorAgent" name="UserPreferenceAgent queueAsyncLLMExtraction should publish an llm-preference-extraction message to LLMPreferenceExtractorAgent" time="0.001">
    </testcase>
    <testcase classname="UserPreferenceAgent queueAsyncLLMExtraction should generate a correlationId if not provided" name="UserPreferenceAgent queueAsyncLLMExtraction should generate a correlationId if not provided" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="ValueAnalysisAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="7.8" tests="14">
    <testcase classname="ValueAnalysisAgent should initialize correctly" name="ValueAnalysisAgent should initialize correctly" time="0.007">
    </testcase>
    <testcase classname="ValueAnalysisAgent handleMessage should return an error for unhandled message types" name="ValueAnalysisAgent handleMessage should return an error for unhandled message types" time="0.002">
    </testcase>
    <testcase classname="ValueAnalysisAgent handleValueAnalysisRequest should return an error if payload is invalid" name="ValueAnalysisAgent handleValueAnalysisRequest should return an error if payload is invalid" time="0.001">
    </testcase>
    <testcase classname="ValueAnalysisAgent handleValueAnalysisRequest should process a value analysis request successfully" name="ValueAnalysisAgent handleValueAnalysisRequest should process a value analysis request successfully" time="0.002">
    </testcase>
    <testcase classname="ValueAnalysisAgent handleValueAnalysisRequest should handle general exceptions during processing" name="ValueAnalysisAgent handleValueAnalysisRequest should handle general exceptions during processing" time="0.006">
    </testcase>
    <testcase classname="ValueAnalysisAgent isValueAnalysisRequest should return true for a valid ValueAnalysisRequest" name="ValueAnalysisAgent isValueAnalysisRequest should return true for a valid ValueAnalysisRequest" time="0">
    </testcase>
    <testcase classname="ValueAnalysisAgent isValueAnalysisRequest should return false if wineId is missing" name="ValueAnalysisAgent isValueAnalysisRequest should return false if wineId is missing" time="0.001">
    </testcase>
    <testcase classname="ValueAnalysisAgent isValueAnalysisRequest should return false if price is missing" name="ValueAnalysisAgent isValueAnalysisRequest should return false if price is missing" time="0">
    </testcase>
    <testcase classname="ValueAnalysisAgent isValueAnalysisRequest should return false if region is missing" name="ValueAnalysisAgent isValueAnalysisRequest should return false if region is missing" time="0.001">
    </testcase>
    <testcase classname="ValueAnalysisAgent isValueAnalysisRequest should return false if vintage is missing" name="ValueAnalysisAgent isValueAnalysisRequest should return false if vintage is missing" time="0.002">
    </testcase>
    <testcase classname="ValueAnalysisAgent isValueAnalysisRequest should return false for non-object input" name="ValueAnalysisAgent isValueAnalysisRequest should return false for non-object input" time="0.001">
    </testcase>
    <testcase classname="ValueAnalysisAgent processValueAnalysis should return LLM_SERVICE_ERROR if LLM service fails" name="ValueAnalysisAgent processValueAnalysis should return LLM_SERVICE_ERROR if LLM service fails" time="0.001">
    </testcase>
    <testcase classname="ValueAnalysisAgent processValueAnalysis should return LLM_NO_RESPONSE if LLM returns no data" name="ValueAnalysisAgent processValueAnalysis should return LLM_NO_RESPONSE if LLM returns no data" time="0.001">
    </testcase>
    <testcase classname="ValueAnalysisAgent processValueAnalysis should return VALUE_ANALYSIS_PROCESSING_ERROR for general exceptions" name="ValueAnalysisAgent processValueAnalysis should return VALUE_ANALYSIS_PROCESSING_ERROR for general exceptions" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="LLMService" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="0.312" tests="10">
    <testcase classname="LLMService sendPrompt should successfully send prompt and return response" name="LLMService sendPrompt should successfully send prompt and return response" time="0.002">
    </testcase>
    <testcase classname="LLMService sendPrompt should handle API errors" name="LLMService sendPrompt should handle API errors" time="0.025">
    </testcase>
    <testcase classname="LLMService sendPrompt should handle invalid response format" name="LLMService sendPrompt should handle invalid response format" time="0">
    </testcase>
    <testcase classname="LLMService sendPrompt should return undefined on network errors" name="LLMService sendPrompt should return undefined on network errors" time="0.026">
    </testcase>
    <testcase classname="LLMService retry logic should retry on network errors and eventually succeed" name="LLMService retry logic should retry on network errors and eventually succeed" time="0.022">
    </testcase>
    <testcase classname="LLMService retry logic should retry on 5xx errors and eventually succeed" name="LLMService retry logic should retry on 5xx errors and eventually succeed" time="0.022">
    </testcase>
    <testcase classname="LLMService retry logic should fail after max retries on persistent network errors" name="LLMService retry logic should fail after max retries on persistent network errors" time="0.022">
    </testcase>
    <testcase classname="LLMService retry logic should fail after max retries on persistent 5xx errors" name="LLMService retry logic should fail after max retries on persistent 5xx errors" time="0.02">
    </testcase>
    <testcase classname="LLMService retry logic should not retry on non-retryable API errors (e.g., 400 Bad Request)" name="LLMService retry logic should not retry on non-retryable API errors (e.g., 400 Bad Request)" time="0.001">
    </testcase>
    <testcase classname="LLMService constructor should initialize with provided parameters" name="LLMService constructor should initialize with provided parameters" time="0">
    </testcase>
  </testsuite>
  <testsuite name="KnowledgeGraphService" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="0.287" tests="19">
    <testcase classname="KnowledgeGraphService createWineNode should create a wine node with all properties" name="KnowledgeGraphService createWineNode should create a wine node with all properties" time="0.002">
    </testcase>
    <testcase classname="KnowledgeGraphService createWineNode should handle minimal wine data" name="KnowledgeGraphService createWineNode should handle minimal wine data" time="0.002">
    </testcase>
    <testcase classname="KnowledgeGraphService findSimilarWines should return similar wines" name="KnowledgeGraphService findSimilarWines should return similar wines" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService findSimilarWines should respect limit parameter" name="KnowledgeGraphService findSimilarWines should respect limit parameter" time="0.002">
    </testcase>
    <testcase classname="KnowledgeGraphService getWinePairings should return wine pairings" name="KnowledgeGraphService getWinePairings should return wine pairings" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService getWineById should return wine when found" name="KnowledgeGraphService getWineById should return wine when found" time="0">
    </testcase>
    <testcase classname="KnowledgeGraphService getWineById should return null when not found" name="KnowledgeGraphService getWineById should return null when not found" time="0">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByIngredients should return wines matching all ingredients" name="KnowledgeGraphService findWinesByIngredients should return wines matching all ingredients" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByIngredients should return empty array for empty ingredients" name="KnowledgeGraphService findWinesByIngredients should return empty array for empty ingredients" time="0.002">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByPreferences should build query with wine type preference" name="KnowledgeGraphService findWinesByPreferences should build query with wine type preference" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByPreferences should build query with price range" name="KnowledgeGraphService findWinesByPreferences should build query with price range" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByPreferences should return empty array for undefined preferences" name="KnowledgeGraphService findWinesByPreferences should return empty array for undefined preferences" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByType should return wines of specified type" name="KnowledgeGraphService findWinesByType should return wines of specified type" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService findWinesByType should return empty array for empty type" name="KnowledgeGraphService findWinesByType should return empty array for empty type" time="0">
    </testcase>
    <testcase classname="KnowledgeGraphService Preference Management should add or update a preference" name="KnowledgeGraphService Preference Management should add or update a preference" time="0.002">
    </testcase>
    <testcase classname="KnowledgeGraphService Preference Management should get only active preferences by default" name="KnowledgeGraphService Preference Management should get only active preferences by default" time="0.003">
    </testcase>
    <testcase classname="KnowledgeGraphService Preference Management should get all preferences when includeInactive is true" name="KnowledgeGraphService Preference Management should get all preferences when includeInactive is true" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService Preference Management should return an empty array when no preferences are found" name="KnowledgeGraphService Preference Management should return an empty array when no preferences are found" time="0.001">
    </testcase>
    <testcase classname="KnowledgeGraphService Preference Management should delete a preference" name="KnowledgeGraphService Preference Management should delete a preference" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="LLMPreferenceExtractorAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="8.048" tests="13">
    <testcase classname="LLMPreferenceExtractorAgent should initialize correctly" name="LLMPreferenceExtractorAgent should initialize correctly" time="0.011">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent handleMessage should return an error for unhandled message types" name="LLMPreferenceExtractorAgent handleMessage should return an error for unhandled message types" time="0.002">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent handleExtractionRequest should return an error if payload is missing" name="LLMPreferenceExtractorAgent handleExtractionRequest should return an error if payload is missing" time="0.002">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent handleExtractionRequest should process a preference extraction request successfully" name="LLMPreferenceExtractorAgent handleExtractionRequest should process a preference extraction request successfully" time="0.003">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent handleExtractionRequest should handle LLM service failure" name="LLMPreferenceExtractorAgent handleExtractionRequest should handle LLM service failure" time="0.304">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent parseLLMResponse should return an error if LLM response is empty" name="LLMPreferenceExtractorAgent parseLLMResponse should return an error if LLM response is empty" time="0.002">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent parseLLMResponse should parse a valid JSON response from LLM" name="LLMPreferenceExtractorAgent parseLLMResponse should parse a valid JSON response from LLM" time="0">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent parseLLMResponse should return an error for invalid JSON response" name="LLMPreferenceExtractorAgent parseLLMResponse should return an error for invalid JSON response" time="0">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent calculateConfidenceScore should return a base score for empty result" name="LLMPreferenceExtractorAgent calculateConfidenceScore should return a base score for empty result" time="0.002">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent calculateConfidenceScore should increase score for isValid true" name="LLMPreferenceExtractorAgent calculateConfidenceScore should increase score for isValid true" time="0.001">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent calculateConfidenceScore should increase score for preferences" name="LLMPreferenceExtractorAgent calculateConfidenceScore should increase score for preferences" time="0.001">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent calculateConfidenceScore should increase score for ingredients" name="LLMPreferenceExtractorAgent calculateConfidenceScore should increase score for ingredients" time="0">
    </testcase>
    <testcase classname="LLMPreferenceExtractorAgent calculateConfidenceScore should return max score for all valid fields" name="LLMPreferenceExtractorAgent calculateConfidenceScore should return max score for all valid fields" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="CircuitBreaker" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="0.215" tests="5">
    <testcase classname="CircuitBreaker initial state should be CLOSED" name="CircuitBreaker initial state should be CLOSED" time="0.003">
    </testcase>
    <testcase classname="CircuitBreaker should open circuit after failure threshold" name="CircuitBreaker should open circuit after failure threshold" time="0.019">
    </testcase>
    <testcase classname="CircuitBreaker should use fallback when circuit is open" name="CircuitBreaker should use fallback when circuit is open" time="0.002">
    </testcase>
    <testcase classname="CircuitBreaker should transition to HALF_OPEN after timeout" name="CircuitBreaker should transition to HALF_OPEN after timeout" time="0.001">
    </testcase>
    <testcase classname="CircuitBreaker should reset to CLOSED after success threshold" name="CircuitBreaker should reset to CLOSED after success threshold" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Neo4jCircuitWrapper" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="0.323" tests="11">
    <testcase classname="Neo4jCircuitWrapper constructor should initialize with provided options" name="Neo4jCircuitWrapper constructor should initialize with provided options" time="0.002">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper execute should execute function through circuit breaker" name="Neo4jCircuitWrapper execute should execute function through circuit breaker" time="0.002">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper execute should propagate circuit breaker errors" name="Neo4jCircuitWrapper execute should propagate circuit breaker errors" time="0.027">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper executeQuery should execute query and return results" name="Neo4jCircuitWrapper executeQuery should execute query and return results" time="0.002">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper executeQuery should handle empty results" name="Neo4jCircuitWrapper executeQuery should handle empty results" time="0.002">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper executeQuery should close session on error" name="Neo4jCircuitWrapper executeQuery should close session on error" time="0.001">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper verifyConnection should return true for successful connection" name="Neo4jCircuitWrapper verifyConnection should return true for successful connection" time="0.003">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper verifyConnection should return false for failed connection" name="Neo4jCircuitWrapper verifyConnection should return false for failed connection" time="0.001">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper close should close driver successfully" name="Neo4jCircuitWrapper close should close driver successfully" time="0.005">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper close should handle close errors" name="Neo4jCircuitWrapper close should handle close errors" time="0.001">
    </testcase>
    <testcase classname="Neo4jCircuitWrapper getCircuitState should return circuit state" name="Neo4jCircuitWrapper getCircuitState should return circuit state" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Neo4jService" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="0.343" tests="11">
    <testcase classname="Neo4jService executeQuery should execute query and return node properties" name="Neo4jService executeQuery should execute query and return node properties" time="0.004">
    </testcase>
    <testcase classname="Neo4jService executeQuery should convert parameters to Neo4j types" name="Neo4jService executeQuery should convert parameters to Neo4j types" time="0">
    </testcase>
    <testcase classname="Neo4jService executeQuery should handle empty results" name="Neo4jService executeQuery should handle empty results" time="0.001">
    </testcase>
    <testcase classname="Neo4jService executeQuery should handle query errors" name="Neo4jService executeQuery should handle query errors" time="0.048">
    </testcase>
    <testcase classname="Neo4jService verifyConnection should return true when connection is verified" name="Neo4jService verifyConnection should return true when connection is verified" time="0.005">
    </testcase>
    <testcase classname="Neo4jService verifyConnection should return false when connection fails" name="Neo4jService verifyConnection should return false when connection fails" time="0.001">
    </testcase>
    <testcase classname="Neo4jService healthCheck should return healthy status when conditions are met" name="Neo4jService healthCheck should return healthy status when conditions are met" time="0.003">
    </testcase>
    <testcase classname="Neo4jService healthCheck should return unhealthy status when circuit is open" name="Neo4jService healthCheck should return unhealthy status when circuit is open" time="0.011">
    </testcase>
    <testcase classname="Neo4jService healthCheck should return unhealthy status when connection fails" name="Neo4jService healthCheck should return unhealthy status when connection fails" time="0.001">
    </testcase>
    <testcase classname="Neo4jService close should close circuit and driver successfully" name="Neo4jService close should close circuit and driver successfully" time="0.001">
    </testcase>
    <testcase classname="Neo4jService close should handle close errors" name="Neo4jService close should handle close errors" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="AgentRegistry Integration" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="8.148" tests="2">
    <testcase classname="AgentRegistry Integration should register all agents with their capabilities" name="AgentRegistry Integration should register all agents with their capabilities" time="0.127">
    </testcase>
    <testcase classname="AgentRegistry Integration should retrieve agents by name with correct capabilities" name="AgentRegistry Integration should retrieve agents by name with correct capabilities" time="0.041">
    </testcase>
  </testsuite>
  <testsuite name="WineRecommendationController" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.298" tests="5">
    <testcase classname="WineRecommendationController executeImpl - POST /wine-recommendations should return recommendations successfully" name="WineRecommendationController executeImpl - POST /wine-recommendations should return recommendations successfully" time="0.023">
    </testcase>
    <testcase classname="WineRecommendationController executeImpl - POST /wine-recommendations should handle service errors" name="WineRecommendationController executeImpl - POST /wine-recommendations should handle service errors" time="0.002">
    </testcase>
    <testcase classname="WineRecommendationController executeImpl - GET /wine-recommendations should return search results successfully" name="WineRecommendationController executeImpl - GET /wine-recommendations should return search results successfully" time="0.002">
    </testcase>
    <testcase classname="WineRecommendationController executeImpl - GET /wine-recommendations should handle search service errors" name="WineRecommendationController executeImpl - GET /wine-recommendations should handle search service errors" time="0.002">
    </testcase>
    <testcase classname="WineRecommendationController should return 405 for unsupported HTTP method" name="WineRecommendationController should return 405 for unsupported HTTP method" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="InMemoryDeadLetterQueue" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.182" tests="5">
    <testcase classname="InMemoryDeadLetterQueue should be empty initially" name="InMemoryDeadLetterQueue should be empty initially" time="0.015">
    </testcase>
    <testcase classname="InMemoryDeadLetterQueue should add a message to the queue" name="InMemoryDeadLetterQueue should add a message to the queue" time="0.003">
    </testcase>
    <testcase classname="InMemoryDeadLetterQueue should add multiple messages to the queue" name="InMemoryDeadLetterQueue should add multiple messages to the queue" time="0.001">
    </testcase>
    <testcase classname="InMemoryDeadLetterQueue should return a copy of the queue when getAll is called" name="InMemoryDeadLetterQueue should return a copy of the queue when getAll is called" time="0.018">
    </testcase>
    <testcase classname="InMemoryDeadLetterQueue should clear the queue" name="InMemoryDeadLetterQueue should clear the queue" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="PreferenceNormalizationService" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.255" tests="22">
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize wineType synonyms" name="PreferenceNormalizationService normalizePreferences should normalize wineType synonyms" time="0.003">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize sweetness synonyms" name="PreferenceNormalizationService normalizePreferences should normalize sweetness synonyms" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize region synonyms" name="PreferenceNormalizationService normalizePreferences should normalize region synonyms" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should handle negations for string values" name="PreferenceNormalizationService normalizePreferences should handle negations for string values" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should handle negations for array values (if applicable)" name="PreferenceNormalizationService normalizePreferences should handle negations for array values (if applicable)" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize priceRange" name="PreferenceNormalizationService normalizePreferences should normalize priceRange" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid priceRange values" name="PreferenceNormalizationService normalizePreferences should discard invalid priceRange values" time="0.004">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize alcoholContent" name="PreferenceNormalizationService normalizePreferences should normalize alcoholContent" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid alcoholContent values" name="PreferenceNormalizationService normalizePreferences should discard invalid alcoholContent values" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize aging" name="PreferenceNormalizationService normalizePreferences should normalize aging" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid aging values" name="PreferenceNormalizationService normalizePreferences should discard invalid aging values" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize servingTemperature" name="PreferenceNormalizationService normalizePreferences should normalize servingTemperature" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid servingTemperature values" name="PreferenceNormalizationService normalizePreferences should discard invalid servingTemperature values" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize volume" name="PreferenceNormalizationService normalizePreferences should normalize volume" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid volume values" name="PreferenceNormalizationService normalizePreferences should discard invalid volume values" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize location" name="PreferenceNormalizationService normalizePreferences should normalize location" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid location values" name="PreferenceNormalizationService normalizePreferences should discard invalid location values" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should normalize distance" name="PreferenceNormalizationService normalizePreferences should normalize distance" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should discard invalid distance values" name="PreferenceNormalizationService normalizePreferences should discard invalid distance values" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should handle other preference types" name="PreferenceNormalizationService normalizePreferences should handle other preference types" time="0">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should return an empty array for empty input" name="PreferenceNormalizationService normalizePreferences should return an empty array for empty input" time="0.001">
    </testcase>
    <testcase classname="PreferenceNormalizationService normalizePreferences should retain original properties of PreferenceNode" name="PreferenceNormalizationService normalizePreferences should retain original properties of PreferenceNode" time="0.019">
    </testcase>
  </testsuite>
  <testsuite name="API Validation" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="0.983" tests="7">
    <testcase classname="API Validation POST /recommendations should reject empty request" name="API Validation POST /recommendations should reject empty request" time="0.051">
    </testcase>
    <testcase classname="API Validation POST /recommendations should reject invalid preferences format" name="API Validation POST /recommendations should reject invalid preferences format" time="0.008">
    </testcase>
    <testcase classname="API Validation POST /recommendations should handle missing preferences gracefully" name="API Validation POST /recommendations should handle missing preferences gracefully" time="0.005">
    </testcase>
    <testcase classname="API Validation POST /recommendations should accept valid request" name="API Validation POST /recommendations should accept valid request" time="0.006">
    </testcase>
    <testcase classname="API Validation GET /search should accept valid search query with string number parameters" name="API Validation GET /search should accept valid search query with string number parameters" time="0.008">
    </testcase>
    <testcase classname="API Validation GET /search should require query parameter" name="API Validation GET /search should require query parameter" time="0.005">
    </testcase>
    <testcase classname="API Validation GET /search should accept valid search" name="API Validation GET /search should accept valid search" time="0.012">
    </testcase>
  </testsuite>
  <testsuite name="RetryManager" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="8.46" tests="6">
    <testcase classname="RetryManager with ExponentialBackoffPolicy should retry with exponential backoff" name="RetryManager with ExponentialBackoffPolicy should retry with exponential backoff" time="0.107">
    </testcase>
    <testcase classname="RetryManager with ExponentialBackoffPolicy should give up after max attempts" name="RetryManager with ExponentialBackoffPolicy should give up after max attempts" time="0.714">
    </testcase>
    <testcase classname="RetryManager with ExponentialBackoffPolicy should respect circuit breaker open state" name="RetryManager with ExponentialBackoffPolicy should respect circuit breaker open state" time="0.702">
    </testcase>
    <testcase classname="RetryManager with ExponentialBackoffPolicy should handle half-open state correctly" name="RetryManager with ExponentialBackoffPolicy should handle half-open state correctly" time="0">
    </testcase>
    <testcase classname="RetryManager with FixedDelayPolicy should retry with fixed delay" name="RetryManager with FixedDelayPolicy should retry with fixed delay" time="0.201">
    </testcase>
    <testcase classname="RetryManager policy evaluation should use the maximum delay from all policies" name="RetryManager policy evaluation should use the maximum delay from all policies" time="0.201">
    </testcase>
  </testsuite>
  <testsuite name="MCPAdapterAgent" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.31" tests="6">
    <testcase classname="MCPAdapterAgent should initialize correctly" name="MCPAdapterAgent should initialize correctly" time="0.033">
    </testcase>
    <testcase classname="MCPAdapterAgent handleMessage should return an error for unhandled message types" name="MCPAdapterAgent handleMessage should return an error for unhandled message types" time="0.001">
    </testcase>
    <testcase classname="MCPAdapterAgent handleToolRequest should return an error if payload is missing or invalid" name="MCPAdapterAgent handleToolRequest should return an error if payload is missing or invalid" time="0.002">
    </testcase>
    <testcase classname="MCPAdapterAgent handleToolRequest should process a successful MCP tool request" name="MCPAdapterAgent handleToolRequest should process a successful MCP tool request" time="0.002">
    </testcase>
    <testcase classname="MCPAdapterAgent handleToolRequest should handle MCP tool call failure" name="MCPAdapterAgent handleToolRequest should handle MCP tool call failure" time="0.006">
    </testcase>
    <testcase classname="MCPAdapterAgent handleToolRequest should handle general exceptions during processing" name="MCPAdapterAgent handleToolRequest should handle general exceptions during processing" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="LoggingDeadLetterHandler" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.189" tests="1">
    <testcase classname="LoggingDeadLetterHandler should log the failed message, error, and metadata" name="LoggingDeadLetterHandler should log the failed message, error, and metadata" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.214" tests="1">
    <testcase classname=" should return 400 for invalid body" name=" should return 400 for invalid body" time="0.021">
    </testcase>
  </testsuite>
  <testsuite name="BaseController" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.226" tests="8">
    <testcase classname="BaseController ok should send 200 status with data when provided" name="BaseController ok should send 200 status with data when provided" time="0.001">
    </testcase>
    <testcase classname="BaseController ok should send 200 status without data when not provided" name="BaseController ok should send 200 status without data when not provided" time="0.001">
    </testcase>
    <testcase classname="BaseController error responses clientError should return 400" name="BaseController error responses clientError should return 400" time="0.001">
    </testcase>
    <testcase classname="BaseController error responses forbidden should return 403" name="BaseController error responses forbidden should return 403" time="0">
    </testcase>
    <testcase classname="BaseController error responses notFound should return 404" name="BaseController error responses notFound should return 404" time="0">
    </testcase>
    <testcase classname="BaseController error responses conflict should return 409" name="BaseController error responses conflict should return 409" time="0.001">
    </testcase>
    <testcase classname="BaseController error responses fail should return 500" name="BaseController error responses fail should return 500" time="0.001">
    </testcase>
    <testcase classname="BaseController execute should call executeImpl" name="BaseController execute should call executeImpl" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Agent Capabilities" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="8.609" tests="8">
    <testcase classname="Agent Capabilities should return correct capabilities for InputValidationAgent" name="Agent Capabilities should return correct capabilities for InputValidationAgent" time="0.045">
    </testcase>
    <testcase classname="Agent Capabilities should return correct capabilities for LLMRecommendationAgent" name="Agent Capabilities should return correct capabilities for LLMRecommendationAgent" time="0.005">
    </testcase>
    <testcase classname="Agent Capabilities should return correct capabilities for MCPAdapterAgent" name="Agent Capabilities should return correct capabilities for MCPAdapterAgent" time="0.006">
    </testcase>
    <testcase classname="Agent Capabilities should return correct capabilities for ValueAnalysisAgent" name="Agent Capabilities should return correct capabilities for ValueAnalysisAgent" time="0.005">
    </testcase>
    <testcase classname="Agent Capabilities should return correct capabilities for UserPreferenceAgent" name="Agent Capabilities should return correct capabilities for UserPreferenceAgent" time="0.005">
    </testcase>
    <testcase classname="Agent Capabilities should return correct capabilities for ExplanationAgent" name="Agent Capabilities should return correct capabilities for ExplanationAgent" time="0.006">
    </testcase>
    <testcase classname="Agent Capabilities should return correct capabilities for FallbackAgent" name="Agent Capabilities should return correct capabilities for FallbackAgent" time="0.033">
    </testcase>
    <testcase classname="Agent Capabilities AgentRegistry Integration should register all agents with their capabilities" name="Agent Capabilities AgentRegistry Integration should register all agents with their capabilities" time="0.064">
    </testcase>
  </testsuite>
  <testsuite name="ConversationHistoryService" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.213" tests="5">
    <testcase classname="ConversationHistoryService should add a conversation turn to history" name="ConversationHistoryService should add a conversation turn to history" time="0.001">
    </testcase>
    <testcase classname="ConversationHistoryService should retrieve conversation history for a user" name="ConversationHistoryService should retrieve conversation history for a user" time="0">
    </testcase>
    <testcase classname="ConversationHistoryService should return an empty array for a user with no history" name="ConversationHistoryService should return an empty array for a user with no history" time="0.001">
    </testcase>
    <testcase classname="ConversationHistoryService should clear conversation history for a user" name="ConversationHistoryService should clear conversation history for a user" time="0">
    </testcase>
    <testcase classname="ConversationHistoryService should handle multiple users with separate histories" name="ConversationHistoryService should handle multiple users with separate histories" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="PreferenceExtractionService" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.192" tests="9">
    <testcase classname="PreferenceExtractionService should prioritize Duckling results over Regex results for the same preference type" name="PreferenceExtractionService should prioritize Duckling results over Regex results for the same preference type" time="0.001">
    </testcase>
    <testcase classname="PreferenceExtractionService should merge results from both Regex and Duckling if keys are different" name="PreferenceExtractionService should merge results from both Regex and Duckling if keys are different" time="0">
    </testcase>
    <testcase classname="PreferenceExtractionService should return null if neither Regex nor Duckling find preferences" name="PreferenceExtractionService should return null if neither Regex nor Duckling find preferences" time="0.001">
    </testcase>
    <testcase classname="PreferenceExtractionService should handle multiple Duckling entities and merge with Regex" name="PreferenceExtractionService should handle multiple Duckling entities and merge with Regex" time="0">
    </testcase>
    <testcase classname="PreferenceExtractionService should handle overlapping preferences from Duckling and Regex, prioritizing Duckling" name="PreferenceExtractionService should handle overlapping preferences from Duckling and Regex, prioritizing Duckling" time="0.001">
    </testcase>
    <testcase classname="PreferenceExtractionService Error Handling should handle Duckling API failure gracefully" name="PreferenceExtractionService Error Handling should handle Duckling API failure gracefully" time="0.001">
    </testcase>
    <testcase classname="PreferenceExtractionService Error Handling should handle empty input" name="PreferenceExtractionService Error Handling should handle empty input" time="0.001">
    </testcase>
    <testcase classname="PreferenceExtractionService Direct Method Tests extractWithRegex should handle all wine types" name="PreferenceExtractionService Direct Method Tests extractWithRegex should handle all wine types" time="0.001">
    </testcase>
    <testcase classname="PreferenceExtractionService Direct Method Tests extractWithDuckling should handle price ranges" name="PreferenceExtractionService Direct Method Tests extractWithDuckling should handle price ranges" time="0">
    </testcase>
  </testsuite>
  <testsuite name="RetryManager" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:18" time="8.833" tests="10">
    <testcase classname="RetryManager with ExponentialBackoffPolicy should retry with exponential backoff" name="RetryManager with ExponentialBackoffPolicy should retry with exponential backoff" time="0.111">
    </testcase>
    <testcase classname="RetryManager with ExponentialBackoffPolicy should give up after max attempts" name="RetryManager with ExponentialBackoffPolicy should give up after max attempts" time="0.714">
    </testcase>
    <testcase classname="RetryManager with ExponentialBackoffPolicy should respect circuit breaker open state" name="RetryManager with ExponentialBackoffPolicy should respect circuit breaker open state" time="0.703">
    </testcase>
    <testcase classname="RetryManager with ExponentialBackoffPolicy should handle half-open state correctly" name="RetryManager with ExponentialBackoffPolicy should handle half-open state correctly" time="0">
    </testcase>
    <testcase classname="RetryManager with FixedDelayPolicy should retry with fixed delay" name="RetryManager with FixedDelayPolicy should retry with fixed delay" time="0.213">
    </testcase>
    <testcase classname="RetryManager policy evaluation should use the maximum delay from all policies" name="RetryManager policy evaluation should use the maximum delay from all policies" time="0.202">
    </testcase>
    <testcase classname="DeadLetterProcessor should retry failed handler executions" name="DeadLetterProcessor should retry failed handler executions" time="0">
    </testcase>
    <testcase classname="DeadLetterProcessor should trigger permanent failure handler when retries exhausted" name="DeadLetterProcessor should trigger permanent failure handler when retries exhausted" time="0.002">
    </testcase>
    <testcase classname="DeadLetterProcessor should call all handlers with the same message" name="DeadLetterProcessor should call all handlers with the same message" time="0.001">
    </testcase>
    <testcase classname="DeadLetterProcessor should include metadata in handler calls" name="DeadLetterProcessor should include metadata in handler calls" time="0">
    </testcase>
  </testsuite>
  <testsuite name="PreferenceForm" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="1.46" tests="9">
    <testcase classname="PreferenceForm renders correctly for adding a new preference" name="PreferenceForm renders correctly for adding a new preference" time="0.163">
    </testcase>
    <testcase classname="PreferenceForm renders correctly for editing an existing preference" name="PreferenceForm renders correctly for editing an existing preference" time="0.032">
    </testcase>
    <testcase classname="PreferenceForm handles form submission for adding a new preference" name="PreferenceForm handles form submission for adding a new preference" time="0.087">
    </testcase>
    <testcase classname="PreferenceForm handles form submission for editing an existing preference" name="PreferenceForm handles form submission for editing an existing preference" time="0.055">
    </testcase>
    <testcase classname="PreferenceForm calls onCancel when the Cancel button is clicked" name="PreferenceForm calls onCancel when the Cancel button is clicked" time="0.025">
    </testcase>
    <testcase classname="PreferenceForm renders select input for wineType and handles selection" name="PreferenceForm renders select input for wineType and handles selection" time="0.027">
    </testcase>
    <testcase classname="PreferenceForm renders number inputs for priceRange and handles input" name="PreferenceForm renders number inputs for priceRange and handles input" time="0.053">
    </testcase>
    <testcase classname="PreferenceForm renders number input for alcoholContent and handles input" name="PreferenceForm renders number input for alcoholContent and handles input" time="0.035">
    </testcase>
    <testcase classname="PreferenceForm displays validation errors for required fields on submission" name="PreferenceForm displays validation errors for required fields on submission" time="0.042">
    </testcase>
  </testsuite>
  <testsuite name="UserPreferenceRoutes" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="1.346" tests="7">
    <testcase classname="UserPreferenceRoutes GET /users/:userId/preferences should return 200 with user preferences" name="UserPreferenceRoutes GET /users/:userId/preferences should return 200 with user preferences" time="0.045">
    </testcase>
    <testcase classname="UserPreferenceRoutes GET /users/:userId/preferences should return 400 if userId is invalid" name="UserPreferenceRoutes GET /users/:userId/preferences should return 400 if userId is invalid" time="0.008">
    </testcase>
    <testcase classname="UserPreferenceRoutes POST /users/:userId/preferences should return 200 on successful preference addition" name="UserPreferenceRoutes POST /users/:userId/preferences should return 200 on successful preference addition" time="0.015">
    </testcase>
    <testcase classname="UserPreferenceRoutes POST /users/:userId/preferences should return 400 for invalid preference data" name="UserPreferenceRoutes POST /users/:userId/preferences should return 400 for invalid preference data" time="0.005">
    </testcase>
    <testcase classname="UserPreferenceRoutes PUT /users/:userId/preferences should return 200 on successful preference update" name="UserPreferenceRoutes PUT /users/:userId/preferences should return 200 on successful preference update" time="0.006">
    </testcase>
    <testcase classname="UserPreferenceRoutes DELETE /users/:userId/preferences/:preferenceId should return 200 on successful preference deletion" name="UserPreferenceRoutes DELETE /users/:userId/preferences/:preferenceId should return 200 on successful preference deletion" time="0.005">
    </testcase>
    <testcase classname="UserPreferenceRoutes DELETE /users/:userId/preferences/:preferenceId should return 400 if preferenceId is invalid" name="UserPreferenceRoutes DELETE /users/:userId/preferences/:preferenceId should return 400 if preferenceId is invalid" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="RecommendationRequest DTO" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="0.655" tests="5">
    <testcase classname="RecommendationRequest DTO should validate a request with conversation history" name="RecommendationRequest DTO should validate a request with conversation history" time="0.002">
    </testcase>
    <testcase classname="RecommendationRequest DTO should validate a request without conversation history" name="RecommendationRequest DTO should validate a request without conversation history" time="0">
    </testcase>
    <testcase classname="RecommendationRequest DTO should reject a request with invalid conversation history format" name="RecommendationRequest DTO should reject a request with invalid conversation history format" time="0.002">
    </testcase>
    <testcase classname="RecommendationRequest DTO should reject a request with invalid role in conversation history" name="RecommendationRequest DTO should reject a request with invalid role in conversation history" time="0.001">
    </testcase>
    <testcase classname="RecommendationRequest DTO should reject a request with missing content in conversation history turn" name="RecommendationRequest DTO should reject a request with missing content in conversation history turn" time="0">
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="1.12" tests="8">
    <testcase classname=" should execute strategies and return combined and ranked recommendations" name=" should execute strategies and return combined and ranked recommendations" time="0.003">
    </testcase>
    <testcase classname=" should handle empty recommendation request by throwing an error" name=" should handle empty recommendation request by throwing an error" time="0.015">
    </testcase>
    <testcase classname=" should handle errors in strategies by re-throwing the error" name=" should handle errors in strategies by re-throwing the error" time="0.001">
    </testcase>
    <testcase classname=" should search wines with valid parameters by calling Neo4jService" name=" should search wines with valid parameters by calling Neo4jService" time="0.001">
    </testcase>
    <testcase classname=" should handle errors during wine search by re-throwing the error" name=" should handle errors during wine search by re-throwing the error" time="0.001">
    </testcase>
    <testcase classname="rankRecommendations should rank wines by frequency" name="rankRecommendations should rank wines by frequency" time="0.001">
    </testcase>
    <testcase classname="rankRecommendations should enhance scores based on similar and pairing relationships" name="rankRecommendations should enhance scores based on similar and pairing relationships" time="0.001">
    </testcase>
    <testcase classname="rankRecommendations should handle errors during score enhancement" name="rankRecommendations should handle errors during score enhancement" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="PreferenceItem" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="1.184" tests="8">
    <testcase classname="PreferenceItem renders preference details correctly" name="PreferenceItem renders preference details correctly" time="0.108">
    </testcase>
    <testcase classname="PreferenceItem handles array value display correctly" name="PreferenceItem handles array value display correctly" time="0.008">
    </testcase>
    <testcase classname="PreferenceItem handles toggle change and calls updatePreference and onPreferenceUpdated" name="PreferenceItem handles toggle change and calls updatePreference and onPreferenceUpdated" time="0.07">
    </testcase>
    <testcase classname="PreferenceItem reverts optimistic toggle update and logs error if updatePreference fails" name="PreferenceItem reverts optimistic toggle update and logs error if updatePreference fails" time="0.016">
    </testcase>
    <testcase classname="PreferenceItem calls onEdit when the Edit button is clicked" name="PreferenceItem calls onEdit when the Edit button is clicked" time="0.012">
    </testcase>
    <testcase classname="PreferenceItem handles delete click, confirms, calls deletePreference, and onPreferenceDeleted" name="PreferenceItem handles delete click, confirms, calls deletePreference, and onPreferenceDeleted" time="0.029">
    </testcase>
    <testcase classname="PreferenceItem does not call deletePreference if confirmation is cancelled" name="PreferenceItem does not call deletePreference if confirmation is cancelled" time="0.019">
    </testcase>
    <testcase classname="PreferenceItem reverts deleting state and logs error if deletePreference fails" name="PreferenceItem reverts deleting state and logs error if deletePreference fails" time="0.022">
    </testcase>
  </testsuite>
  <testsuite name="PreferenceList" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:27" time="1.019" tests="5">
    <testcase classname="PreferenceList renders loading state initially" name="PreferenceList renders loading state initially" time="0.026">
    </testcase>
    <testcase classname="PreferenceList renders error state if fetching fails" name="PreferenceList renders error state if fetching fails" time="0.004">
    </testcase>
    <testcase classname="PreferenceList renders the list of preferences when data is loaded" name="PreferenceList renders the list of preferences when data is loaded" time="0.016">
    </testcase>
    <testcase classname="PreferenceList renders &quot;No preferences found&quot; when the list is empty" name="PreferenceList renders &quot;No preferences found&quot; when the list is empty" time="0.005">
    </testcase>
    <testcase classname="PreferenceList calls onEdit when the Edit button in a PreferenceItem is clicked" name="PreferenceList calls onEdit when the Edit button in a PreferenceItem is clicked" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="Recommendations API" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:19" time="9.042" tests="5">
    <testcase classname="Recommendations API should return recommendation for valid input" name="Recommendations API should return recommendation for valid input" time="0.038">
    </testcase>
    <testcase classname="Recommendations API should return 400 if communicationBus.sendMessageAndWaitForResponse returns failure" name="Recommendations API should return 400 if communicationBus.sendMessageAndWaitForResponse returns failure" time="0.006">
    </testcase>
    <testcase classname="Recommendations API should return 404 if communicationBus.sendMessageAndWaitForResponse returns null data" name="Recommendations API should return 404 if communicationBus.sendMessageAndWaitForResponse returns null data" time="0.004">
    </testcase>
    <testcase classname="Recommendations API should return 500 for unexpected errors" name="Recommendations API should return 500 for unexpected errors" time="0.008">
    </testcase>
    <testcase classname="Recommendations API should return 400 for invalid input" name="Recommendations API should return 400 for invalid input" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="RecommendationRoutes" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="1.749" tests="9">
    <testcase classname="RecommendationRoutes POST /recommendations should return 200 with recommendations when communication bus returns success" name="RecommendationRoutes POST /recommendations should return 200 with recommendations when communication bus returns success" time="0.016">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 400 when communication bus returns an error" name="RecommendationRoutes POST /recommendations should return 400 when communication bus returns an error" time="0.003">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 404 when communication bus returns null data" name="RecommendationRoutes POST /recommendations should return 404 when communication bus returns null data" time="0.002">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 500 on unexpected errors" name="RecommendationRoutes POST /recommendations should return 500 on unexpected errors" time="0.003">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 400 for invalid input (e.g., missing userId)" name="RecommendationRoutes POST /recommendations should return 400 for invalid input (e.g., missing userId)" time="0.004">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 400 for an empty request body" name="RecommendationRoutes POST /recommendations should return 400 for an empty request body" time="0.002">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 200 with recommendations for food pairing input" name="RecommendationRoutes POST /recommendations should return 200 with recommendations for food pairing input" time="0.003">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 200 with recommendations for ingredients input" name="RecommendationRoutes POST /recommendations should return 200 with recommendations for ingredients input" time="0.002">
    </testcase>
    <testcase classname="RecommendationRoutes POST /recommendations should return 200 with recommendations for conversation history input" name="RecommendationRoutes POST /recommendations should return 200 with recommendations for conversation history input" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="E2E Tests" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:25" time="2.78" tests="10">
    <testcase classname="E2E Tests should return a successful response for the health check" name="E2E Tests should return a successful response for the health check" time="0.015">
    </testcase>
    <testcase classname="E2E Tests should return an error response for an invalid request" name="E2E Tests should return an error response for an invalid request" time="0.015">
    </testcase>
    <testcase classname="E2E Tests should return a successful response for a valid recommendation request" name="E2E Tests should return a successful response for a valid recommendation request" time="0.015">
    </testcase>
    <testcase classname="E2E Tests should return a successful response for a valid ingredient-based recommendation request" name="E2E Tests should return a successful response for a valid ingredient-based recommendation request" time="0.005">
    </testcase>
    <testcase classname="E2E Tests should return a successful response for an LLM-based recommendation request" name="E2E Tests should return a successful response for an LLM-based recommendation request" time="0.004">
    </testcase>
    <testcase classname="E2E Tests User Preference API E2E Tests should return 200 with user preferences" name="E2E Tests User Preference API E2E Tests should return 200 with user preferences" time="0.005">
    </testcase>
    <testcase classname="E2E Tests User Preference API E2E Tests should return 200 on successful preference addition" name="E2E Tests User Preference API E2E Tests should return 200 on successful preference addition" time="0.004">
    </testcase>
    <testcase classname="E2E Tests User Preference API E2E Tests should return 200 on successful preference deletion" name="E2E Tests User Preference API E2E Tests should return 200 on successful preference deletion" time="0.004">
    </testcase>
    <testcase classname="E2E Tests Search API E2E Tests should return 200 with search results for a valid query" name="E2E Tests Search API E2E Tests should return 200 with search results for a valid query" time="0.009">
    </testcase>
    <testcase classname="E2E Tests Search API E2E Tests should return 400 for an invalid search query" name="E2E Tests Search API E2E Tests should return 400 for an invalid search query" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="WineRecommendationController" errors="0" failures="0" skipped="0" timestamp="2025-06-22T07:10:26" time="1.719" tests="6">
    <testcase classname="WineRecommendationController POST /wine-recommendations should return 200 with recommendations" name="WineRecommendationController POST /wine-recommendations should return 200 with recommendations" time="0.021">
    </testcase>
    <testcase classname="WineRecommendationController POST /wine-recommendations should return 400 for invalid recommendation request" name="WineRecommendationController POST /wine-recommendations should return 400 for invalid recommendation request" time="0.006">
    </testcase>
    <testcase classname="WineRecommendationController POST /wine-recommendations should return 500 on recommendation strategy error" name="WineRecommendationController POST /wine-recommendations should return 500 on recommendation strategy error" time="0.005">
    </testcase>
    <testcase classname="WineRecommendationController GET /wine-recommendations should return 200 with search results" name="WineRecommendationController GET /wine-recommendations should return 200 with search results" time="0.005">
    </testcase>
    <testcase classname="WineRecommendationController GET /wine-recommendations should return 400 for invalid search request" name="WineRecommendationController GET /wine-recommendations should return 400 for invalid search request" time="0.008">
    </testcase>
    <testcase classname="WineRecommendationController GET /wine-recommendations should return 500 on search strategy error" name="WineRecommendationController GET /wine-recommendations should return 500 on search strategy error" time="0.003">
    </testcase>
  </testsuite>
</testsuites>